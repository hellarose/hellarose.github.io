(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7167642c"],{"498a":function(e,t,r){"use strict";var n=r("23e7"),o=r("58a8").trim,a=r("c8d2");n({target:"String",proto:!0,forced:a("trim")},{trim:function(){return o(this)}})},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,r){var n=r("1d80"),o=r("5899"),a="["+o+"]",i=RegExp("^"+a+a+"*"),s=RegExp(a+a+"*$"),l=function(e){return function(t){var r=String(n(t));return 1&e&&(r=r.replace(i,"")),2&e&&(r=r.replace(s,"")),r}};e.exports={start:l(1),end:l(2),trim:l(3)}},"642a":function(e,t,r){},"7db0":function(e,t,r){"use strict";var n=r("23e7"),o=r("b727").find,a=r("44d2"),i=r("ae40"),s="find",l=!0,u=i(s);s in[]&&Array(1)[s]((function(){l=!1})),n({target:"Array",proto:!0,forced:l||!u},{find:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),a(s)},"99af":function(e,t,r){"use strict";var n=r("23e7"),o=r("d039"),a=r("e8b5"),i=r("861d"),s=r("7b0b"),l=r("50c4"),u=r("8418"),c=r("65f0"),d=r("1dde"),p=r("b622"),_=r("2d00"),m=p("isConcatSpreadable"),f=9007199254740991,b="Maximum allowed index exceeded",w=_>=51||!o((function(){var e=[];return e[m]=!1,e.concat()[0]!==e})),h=d("concat"),g=function(e){if(!i(e))return!1;var t=e[m];return void 0!==t?!!t:a(e)},v=!w||!h;n({target:"Array",proto:!0,forced:v},{concat:function(e){var t,r,n,o,a,i=s(this),d=c(i,0),p=0;for(t=-1,n=arguments.length;t<n;t++)if(a=-1===t?i:arguments[t],g(a)){if(o=l(a.length),p+o>f)throw TypeError(b);for(r=0;r<o;r++,p++)r in a&&u(d,p,a[r])}else{if(p>=f)throw TypeError(b);u(d,p++,a)}return d.length=p,d}})},a7ce:function(e,t,r){"use strict";var n=r("642a"),o=r.n(n);o.a},c8d2:function(e,t,r){var n=r("d039"),o=r("5899"),a="​᠎";e.exports=function(e){return n((function(){return!!o[e]()||a[e]()!=a||o[e].name!==e}))}},febc:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-card",[r("el-row",[r("el-col",{attrs:{span:8}},[r("el-input",{attrs:{placeholder:"请输入搜索内容"},model:{value:e.id_for_seek,callback:function(t){e.id_for_seek=t},expression:"id_for_seek"}},[r("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.seekbyid},slot:"append"})],1)],1),r("el-col",{attrs:{span:4}},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.show_add_board=!0}}},[e._v("添加用户")])],1)],1),e.table_obj?r("div",[r("el-table",{attrs:{data:e.table_obj}},[r("el-table-column",{attrs:{type:"index",label:"#"}}),r("el-table-column",{attrs:{prop:"username",label:"姓名"}}),r("el-table-column",{attrs:{prop:"email",label:"邮箱"}}),r("el-table-column",{attrs:{prop:"mobile",label:"电话"}}),r("el-table-column",{attrs:{prop:"role_name",label:"角色"}}),r("el-table-column",{attrs:{prop:"mg_state",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-switch",{on:{change:function(r){e.change_mg_state(r,t.row,t.$index)}},model:{value:t.row.mg_state,callback:function(r){e.$set(t.row,"mg_state",r)},expression:"scoped.row.mg_state"}})]}}],null,!1,4060094444)}),r("el-table-column",{attrs:{prop:"option",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return r("div",{},[r("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(r){return e.run_editor(t.row,"edit")}}}),r("el-button",{attrs:{type:"danger",icon:"el-icon-delete"},on:{click:function(r){return e.run_editor(t.row,"del")}}}),r("el-button",{attrs:{type:"warning",icon:"el-icon-setting"},on:{click:function(r){return e.run_editor(t.row,"set")}}})],1)}}],null,!1,515454986)})],1)],1):e._e(),r("el-pagination",{attrs:{"current-page":e.current_page,"page-sizes":e.page_sizes,"page-size":e.page_size,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),r("el-dialog",{attrs:{title:"添加用户",visible:e.show_add_board}},[r("div",[e._v(" 用户名："),r("el-input",{attrs:{required:"",type:"text"},model:{value:e.newuser.name,callback:function(t){e.$set(e.newuser,"name",t)},expression:"newuser.name"}}),e._v(" 密码："),r("el-input",{attrs:{required:"",type:"password"},model:{value:e.newuser.sn,callback:function(t){e.$set(e.newuser,"sn",t)},expression:"newuser.sn"}}),e._v(" 邮箱："),r("el-input",{attrs:{required:"",type:"text"},model:{value:e.newuser.email,callback:function(t){e.$set(e.newuser,"email",t)},expression:"newuser.email"}}),e._v(" 手机："),r("el-input",{attrs:{required:"",type:"text"},model:{value:e.newuser.num,callback:function(t){e.$set(e.newuser,"num",t)},expression:"newuser.num"}})],1),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.show_add_board=!1}}},[e._v("取消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.adduser}},[e._v("确定")])],1)]),r("el-dialog",{attrs:{title:"修改用户信息",visible:e.show_edit_board}},[r("div",[r("el-input",{attrs:{disabled:""},model:{value:e.edit_user.name,callback:function(t){e.$set(e.edit_user,"name",t)},expression:"edit_user.name"}},[r("div",{attrs:{slot:"prepend"},slot:"prepend"},[e._v("用户名")])]),r("el-input",{attrs:{required:""},model:{value:e.edit_user.email,callback:function(t){e.$set(e.edit_user,"email",t)},expression:"edit_user.email"}},[r("div",{attrs:{slot:"prepend"},slot:"prepend"},[e._v("邮箱")])]),r("el-input",{attrs:{required:""},model:{value:e.edit_user.mobile,callback:function(t){e.$set(e.edit_user,"mobile",t)},expression:"edit_user.mobile"}},[r("div",{attrs:{slot:"prepend"},slot:"prepend"},[e._v("手机")])])],1),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.show_edit_board=!1}}},[e._v("取消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.edituser(e.timly_row)}}},[e._v("确定")])],1)]),r("el-dialog",{attrs:{title:"删除用户",visible:e.show_del_board}},[r("div",{attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.show_del_board=!1}}},[e._v("取消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.deleteuser(e.timly_row)}}},[e._v("确定")])],1)]),r("el-dialog",{attrs:{title:"分配角色",visible:e.show_role_board}},[e.timly_row?r("div",[r("p",[e._v("当前的用户名"+e._s(e.now_role.name))]),r("p",[e._v("当前的角色"+e._s(e.now_role.role))]),r("p",[e._v(" 新的角色 "),e.rolelist?r("el-select",{model:{value:e.now_role.newrole,callback:function(t){e.$set(e.now_role,"newrole",t)},expression:"now_role.newrole"}},e._l(e.rolelist,(function(t,n){return r("el-option",{key:n,attrs:{value:t.roleName}},[e._v(" "+e._s(t.roleName)+" ")])})),1):e._e()],1)]):e._e(),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.show_role_board=!1}}},[e._v("取消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.settinguser(e.timly_row)}}},[e._v("确定")])],1)])],1)},o=[],a=(r("99af"),r("7db0"),r("b0c0"),r("498a"),r("96cf"),r("1da1")),i={name:"userlist",data:function(){return{table_obj:null,current_page:1,page_sizes:[2,5,10,15],page_size:2,total:3,show_add_board:!1,newuser:{name:"",sn:"",email:"",num:""},id_for_seek:"",show_edit_board:!1,edit_user:{name:"",email:"",mobile:""},show_del_board:!1,show_role_board:!1,timly_row:null,now_role:{name:"",role:"",newrole:"",rid:""},rolelist:null}},created:function(){},mounted:function(){window.userlist=this,this.oninit()},methods:{oninit:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("users",{params:{query:"",pagenum:e.current_page,pagesize:e.page_size}});case 2:r=t.sent,n=r.data,e.table_obj=n.data.users,console.log("table_obj",e.table_obj),e.total=n.data.total;case 7:case"end":return t.stop()}}),t)})))()},change_mg_state:function(e,t,r){var n=this;return Object(a["a"])(regeneratorRuntime.mark((function o(){var a,i;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return console.log(e,t,r),o.next=3,n.$http.put("/users/".concat(t.id,"/state/").concat(e));case 3:a=o.sent,i=a.data,console.log("修改状态结果",i),200==i.meta.status&&n.oninit();case 7:case"end":return o.stop()}}),o)})))()},handleSizeChange:function(e){console.log("每页 ".concat(e," 条")),this.page_size=e,this.oninit()},handleCurrentChange:function(e){console.log("当前页: ".concat(e)),this.current_page=e,this.oninit()},adduser:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r,n,o,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=e.newuser,n=r.name.trim()&&r.sn.trim()&&r.email.trim()&&r.num.trim(),n){t.next=7;break}return e.$message("请补全信息"),t.abrupt("return",!1);case 7:return t.next=9,e.$http.post("/users",{username:r.name,password:r.sn,email:r.email,mobile:r.num});case 9:o=t.sent,a=o.data,"创建成功"==a.meta.msg&&(e.show_add_board=!1,e.oninit());case 12:case"end":return t.stop()}}),t)})))()},seekbyid:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.id_for_seek.trim()){t.next=5;break}return e.$message("搜索框为空"),t.abrupt("return",!1);case 5:return t.next=7,e.$http.get("/users",{params:{query:e.id_for_seek,pagenum:e.current_page,pagesize:e.page_size}});case 7:r=t.sent,n=r.data,console.log(n),n.data?(e.table_obj=n.data.users,console.log("table_obj",e.table_obj),e.total=n.data.total):e.$message(n.meta.msg);case 11:case"end":return t.stop()}}),t)})))()},getrolesinfo:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){var n,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$http.get("/roles");case 2:n=r.sent,o=n.data,console.log("获取角色列表",o),t.rolelist=o.data,e();case 7:case"end":return r.stop()}}),r)})))()},run_editor:function(e,t){var r=this;switch(this.timly_row=e,t){case"edit":var n=this.edit_user;n.name=e.username,n.email=e.email,n.mobile=e.mobile,this.show_edit_board=!0;break;case"del":this.show_del_board=!0;break;case"set":this.getrolesinfo((function(){r.show_role_board=!0}));break}},edituser:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){var n,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$http.put("/users/".concat(e.id),{email:e.email,mobile:e.mobile});case 2:n=r.sent,o=n.data.data,console.log(o),t.show_edit_board=!1,t.oninit();case 7:case"end":return r.stop()}}),r)})))()},deleteuser:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){var n,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$http.delete("/users/".concat(e.id));case 2:n=r.sent,o=n.data,console.log("删除回执",o),t.show_del_board=!1,t.oninit();case 7:case"end":return r.stop()}}),r)})))()},settinguser:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){var n,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.now_role.rid=t.rolelist.find((function(e){return e.roleName==t.now_role.newrole})).id,r.next=3,t.$http.put("/users/".concat(e.id,"/role"),{rid:t.now_role.rid});case 3:n=r.sent,o=n.data,console.log(o),t.show_role_board=!1,t.oninit();case 8:case"end":return r.stop()}}),r)})))()}},computed:{},watch:{},filters:{},directives:{},components:{}},s=i,l=(r("a7ce"),r("2877")),u=Object(l["a"])(s,n,o,!1,null,"c9caba2e",null);t["default"]=u.exports}}]);
//# sourceMappingURL=chunk-7167642c.9b08a236.js.map