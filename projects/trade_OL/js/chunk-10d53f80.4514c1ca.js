(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-10d53f80"],{1276:function(t,e,n){"use strict";var a=n("d784"),r=n("44e7"),i=n("825a"),c=n("1d80"),o=n("4840"),l=n("8aa5"),s=n("50c4"),u=n("14c3"),d=n("9263"),p=n("d039"),_=[].push,f=Math.min,v=4294967295,b=!p((function(){return!RegExp(v,"y")}));a("split",2,(function(t,e,n){var a;return a="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,n){var a=String(c(this)),i=void 0===n?v:n>>>0;if(0===i)return[];if(void 0===t)return[a];if(!r(t))return e.call(a,t,i);var o,l,s,u=[],p=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),f=0,b=new RegExp(t.source,p+"g");while(o=d.call(b,a)){if(l=b.lastIndex,l>f&&(u.push(a.slice(f,o.index)),o.length>1&&o.index<a.length&&_.apply(u,o.slice(1)),s=o[0].length,f=l,u.length>=i))break;b.lastIndex===o.index&&b.lastIndex++}return f===a.length?!s&&b.test("")||u.push(""):u.push(a.slice(f)),u.length>i?u.slice(0,i):u}:"0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:e.call(this,t,n)}:e,[function(e,n){var r=c(this),i=void 0==e?void 0:e[t];return void 0!==i?i.call(e,r,n):a.call(String(r),e,n)},function(t,r){var c=n(a,t,this,r,a!==e);if(c.done)return c.value;var d=i(t),p=String(this),_=o(d,RegExp),g=d.unicode,h=(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.unicode?"u":"")+(b?"y":"g"),m=new _(b?d:"^(?:"+d.source+")",h),k=void 0===r?v:r>>>0;if(0===k)return[];if(0===p.length)return null===u(m,p)?[p]:[];var w=0,x=0,y=[];while(x<p.length){m.lastIndex=b?x:0;var R,I=u(m,b?p:p.slice(x));if(null===I||(R=f(s(m.lastIndex+(b?0:x)),p.length))===w)x=l(p,x,g);else{if(y.push(p.slice(w,x)),y.length===k)return y;for(var V=1;V<=I.length-1;V++)if(y.push(I[V]),y.length===k)return y;x=w=R}}return y.push(p.slice(w)),y}]}),!b)},"44e7":function(t,e,n){var a=n("861d"),r=n("c6b6"),i=n("b622"),c=i("match");t.exports=function(t){var e;return a(t)&&(void 0!==(e=t[c])?!!e:"RegExp"==r(t))}},"45b7":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-card",[n("el-alert",{attrs:{title:"添加商品信息","show-icon":"",closable:!1,type:"warning"}}),n("el-row",[n("el-col",{attrs:{span:24}},[n("span",[t._v("选择商品分类：")]),n("el-cascader",{attrs:{options:t.data_on_ready,props:{expandTrigger:"hover",label:"cat_name",value:"cat_id"}},on:{change:t.cascader_change}})],1)],1),n("el-tabs",{on:{"tab-click":t.tabs_change},model:{value:t.tab_active,callback:function(e){t.tab_active=e},expression:"tab_active"}},[n("el-tab-pane",{attrs:{label:"动态参数",name:"many"}},[n("el-table",{attrs:{data:t.data_on_cat_certain}},[n("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._l(e.row.attr_vals.split(","),(function(e,a){return n("el-tag",{key:a},[t._v(" "+t._s(e)+" ")])})),t.inputVisible?n("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small"},nativeOn:{keyup:function(n){return!n.type.indexOf("key")&&t._k(n.keyCode,"enter",13,n.key,"Enter")?null:t.handleInputConfirm(e.row)}},model:{value:t.inputValue,callback:function(e){t.inputValue=e},expression:"inputValue"}}):n("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:t.showInput}},[t._v("+ New Tag")])]}}])}),n("el-table-column",{attrs:{prop:"attr_id",label:"#"}}),n("el-table-column",{attrs:{prop:"attr_name",label:"参数名称"}}),n("el-table-column",{attrs:{prop:"option",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return n("div",{},[n("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(n){return t.run_editor(e.row,"edit")}}}),n("el-button",{attrs:{type:"danger",icon:"el-icon-delete"},on:{click:function(n){return t.run_editor(e.row,"del")}}})],1)}}])})],1)],1),n("el-tab-pane",{attrs:{label:"静态属性",name:"only"}},[n("el-table",{attrs:{data:t.data_on_cat_certain}},[n("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",[t._l(e.row.attr_vals.split(","),(function(e,a){return n("el-tag",{key:a},[t._v(" "+t._s(e)+" ")])})),t.inputVisible?n("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small"},nativeOn:{keyup:function(n){return!n.type.indexOf("key")&&t._k(n.keyCode,"enter",13,n.key,"Enter")?null:t.handleInputConfirm(e.row)}},model:{value:t.inputValue,callback:function(e){t.inputValue=e},expression:"inputValue"}}):n("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:t.showInput}},[t._v("+ New Tag")])],2)]}}])}),n("el-table-column",{attrs:{prop:"attr_id",label:"#"}}),n("el-table-column",{attrs:{prop:"attr_name",label:"属性名称"}}),n("el-table-column",{attrs:{prop:"option",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return n("div",{},[n("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(n){return t.run_editor(e.row,"edit")}}}),n("el-button",{attrs:{type:"danger",icon:"el-icon-delete"},on:{click:function(n){return t.run_editor(e.row,"del")}}})],1)}}])})],1)],1)],1)],1),n("el-dialog",{attrs:{title:"修改参数",visible:t.click_edit_btn}},[n("div",[n("el-input",{model:{value:t.val_in_mask_of_edit,callback:function(e){t.val_in_mask_of_edit=e},expression:"val_in_mask_of_edit"}},[n("div",{attrs:{slot:"prepend"},slot:"prepend"},[t._v("参数：")])])],1),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.click_edit_btn=!1}}},[t._v("取消")]),n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.edit_sure(t.r)}}},[t._v("确定")])],1)]),n("el-dialog",{attrs:{visible:t.click_del_btn}},[n("div",{attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.click_del_btn=!1}}},[t._v("取消")]),n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.del_sure(t.r)}}},[t._v("确定")])],1)])],1)},r=[],i=(n("99af"),n("a15b"),n("ac1f"),n("1276"),n("498a"),n("96cf"),n("1da1")),c={name:"sortarg",data:function(){return{data_on_ready:null,tab_active:"many",click_edit_btn:!1,click_del_btn:!1,data_on_cat_certain:null,r:null,cat_confirmed:-1,inputVisible:!1,inputValue:"",val_in_mask_of_edit:""}},created:function(){},mounted:function(){this.oninit()},methods:{oninit:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get("/categories",{params:{type:3}});case 2:n=e.sent,a=n.data,a.data?(t.data_on_ready=a.data,console.log("获取分类参数",a)):t.$message(a.meta.msg);case 5:case"end":return e.stop()}}),e)})))()},cascader_change:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var a,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return console.log(123),console.log(t),e.cat_confirmed=t[2],n.next=5,e.$http.get("categories/".concat(e.cat_confirmed,"/attributes"),{params:{sel:e.tab_active}});case 5:a=n.sent,r=a.data,console.log(r),e.data_on_cat_certain=r.data?r.data:null,console.log("获取参数列表",e.data_on_cat_certain);case 10:case"end":return n.stop()}}),n)})))()},tabs_change:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var a,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(console.log(t),e.tab_active=t.index-0?"only":"many",-1==e.cat_confirmed){n.next=11;break}return n.next=5,e.$http.get("categories/".concat(e.cat_confirmed,"/attributes"),{params:{sel:e.tab_active}});case 5:a=n.sent,r=a.data,console.log(r.data),e.data_on_cat_certain=r.data,n.next=12;break;case 11:e.data_on_cat_certain=null;case 12:case"end":return n.stop()}}),n)})))()},run_editor:function(t,e){switch(this.r=t,e){case"edit":this.val_in_mask_of_edit=this.r.attr_name,this.click_edit_btn=!0;break;case"del":this.click_del_btn=!0;break}},edit_sure:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var a,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.$http.put("/categories/".concat(t.cat_id,"/attributes/").concat(t.attr_id),{attr_sel:e.tab_active,attr_name:e.val_in_mask_of_edit,attr_vals:t.attr_vals});case 2:a=n.sent,r=a.data,console.log("修改回执",r),e.click_edit_btn=!1,e.r=null,e.cascader_change([0,0,e.cat_confirmed]);case 8:case"end":return n.stop()}}),n)})))()},del_sure:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var a,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.$http.delete("/categories/".concat(t.cat_id,"/attributes/").concat(t.attr_id),{});case 2:a=n.sent,r=a.data,console.log("删除回执",r),e.click_del_btn=!1,e.r=null,e.cascader_change([0,0,e.cat_confirmed]);case 8:case"end":return n.stop()}}),n)})))()},showInput:function(){var t=this;this.inputVisible=!0,this.$nextTick((function(e){t.$refs.saveTagInput.$refs.input.focus()}))},handleInputConfirm:function(t){console.log(t);var e=this.inputValue.trim();if(e){var n=t.attr_vals.split(",");n.push(e),n=n.join(",");var a="/categories/".concat(t.cat_id,"/attributes/").concat(t.attr_id),r={attr_name:t.attr_name,attr_sel:this.tab_active,attr_vals:n};console.log(a,r),this.add_new_tag(a,r)}else this.$message("不可为空");this.inputVisible=!1,this.inputValue=""},add_new_tag:function(t,e){var n=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var r,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,n.$http.put(t,e);case 2:r=a.sent,i=r.data,console.log(i.data),n.cascader_change([0,0,n.cat_confirmed]);case 6:case"end":return a.stop()}}),a)})))()}},computed:{},watch:{},filters:{},directives:{},components:{}},o=c,l=n("2877"),s=Object(l["a"])(o,a,r,!1,null,"0bbfe549",null);e["default"]=s.exports},"498a":function(t,e,n){"use strict";var a=n("23e7"),r=n("58a8").trim,i=n("c8d2");a({target:"String",proto:!0,forced:i("trim")},{trim:function(){return r(this)}})},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,n){var a=n("1d80"),r=n("5899"),i="["+r+"]",c=RegExp("^"+i+i+"*"),o=RegExp(i+i+"*$"),l=function(t){return function(e){var n=String(a(e));return 1&t&&(n=n.replace(c,"")),2&t&&(n=n.replace(o,"")),n}};t.exports={start:l(1),end:l(2),trim:l(3)}},"99af":function(t,e,n){"use strict";var a=n("23e7"),r=n("d039"),i=n("e8b5"),c=n("861d"),o=n("7b0b"),l=n("50c4"),s=n("8418"),u=n("65f0"),d=n("1dde"),p=n("b622"),_=n("2d00"),f=p("isConcatSpreadable"),v=9007199254740991,b="Maximum allowed index exceeded",g=_>=51||!r((function(){var t=[];return t[f]=!1,t.concat()[0]!==t})),h=d("concat"),m=function(t){if(!c(t))return!1;var e=t[f];return void 0!==e?!!e:i(t)},k=!g||!h;a({target:"Array",proto:!0,forced:k},{concat:function(t){var e,n,a,r,i,c=o(this),d=u(c,0),p=0;for(e=-1,a=arguments.length;e<a;e++)if(i=-1===e?c:arguments[e],m(i)){if(r=l(i.length),p+r>v)throw TypeError(b);for(n=0;n<r;n++,p++)n in i&&s(d,p,i[n])}else{if(p>=v)throw TypeError(b);s(d,p++,i)}return d.length=p,d}})},a15b:function(t,e,n){"use strict";var a=n("23e7"),r=n("44ad"),i=n("fc6a"),c=n("a640"),o=[].join,l=r!=Object,s=c("join",",");a({target:"Array",proto:!0,forced:l||!s},{join:function(t){return o.call(i(this),void 0===t?",":t)}})},c8d2:function(t,e,n){var a=n("d039"),r=n("5899"),i="​᠎";t.exports=function(t){return a((function(){return!!r[t]()||i[t]()!=i||r[t].name!==t}))}}}]);
//# sourceMappingURL=chunk-10d53f80.4514c1ca.js.map