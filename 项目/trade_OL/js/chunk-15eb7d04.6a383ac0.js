(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-15eb7d04"],{"057f":function(e,t,n){var r=n("fc6a"),o=n("241c").f,i={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],c=function(e){try{return o(e)}catch(t){return a.slice()}};e.exports.f=function(e){return a&&"[object Window]"==i.call(e)?c(e):o(r(e))}},1807:function(e,t,n){"use strict";var r=n("bb8a"),o=n.n(r);o.a},"3ca3":function(e,t,n){"use strict";var r=n("6547").charAt,o=n("69f3"),i=n("7dd0"),a="String Iterator",c=o.set,l=o.getterFor(a);i(String,"String",(function(e){c(this,{type:a,string:String(e),index:0})}),(function(){var e,t=l(this),n=t.string,o=t.index;return o>=n.length?{value:void 0,done:!0}:(e=r(n,o),t.index+=e.length,{value:e,done:!1})}))},"4df4":function(e,t,n){"use strict";var r=n("0366"),o=n("7b0b"),i=n("9bdd"),a=n("e95a"),c=n("50c4"),l=n("8418"),s=n("35a1");e.exports=function(e){var t,n,u,d,f,p,h=o(e),b="function"==typeof this?this:Array,g=arguments.length,v=g>1?arguments[1]:void 0,m=void 0!==v,y=s(h),_=0;if(m&&(v=r(v,g>2?arguments[2]:void 0,2)),void 0==y||b==Array&&a(y))for(t=c(h.length),n=new b(t);t>_;_++)p=m?v(h[_],_):h[_],l(n,_,p);else for(d=y.call(h),f=d.next,n=new b;!(u=f.call(d)).done;_++)p=m?i(d,v,[u.value,_],!0):u.value,l(n,_,p);return n.length=_,n}},"746f":function(e,t,n){var r=n("428f"),o=n("5135"),i=n("e538"),a=n("9bf2").f;e.exports=function(e){var t=r.Symbol||(r.Symbol={});o(t,e)||a(t,e,{value:i.f(e)})}},"92cf":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-card",[n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.open_role_adder=!0}}},[e._v("添加角色")]),e.role_list?n("el-table",{attrs:{data:e.role_list}},[n("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return e.role_list?e._l(t.row.children,(function(t,r){return n("el-row",{key:r,staticClass:"tag_area"},[n("el-col",{attrs:{span:5}},[n("el-tag",{attrs:{closable:""}},[e._v(e._s(t.authName))]),n("el-icon",{staticClass:"el-icon-caret-right"})],1),n("el-col",{attrs:{span:19}},[n("el-row",[n("el-col",{attrs:{span:6}},[n("el-tag",{attrs:{closable:"",type:"success"}},[e._v(e._s("示例"))]),n("el-icon",{staticClass:"el-icon-caret-right"})],1),n("el-col",{attrs:{span:18}},e._l(t.children,(function(t,r){return n("el-tag",{key:r,attrs:{closable:"",type:"warning"}},[e._v(e._s(t.authName))])})),1)],1)],1)],1)})):void 0}}],null,!0)}),n("el-table-column",{attrs:{prop:"id",label:"#"}}),n("el-table-column",{attrs:{prop:"roleName",label:"角色名称"}}),n("el-table-column",{attrs:{prop:"roleDesc",label:"角色描述"}}),n("el-table-column",{attrs:{prop:"option",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return n("div",{},[n("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(n){return e.onfatechange(t.row,"edit")}}},[e._v("编辑")]),n("el-button",{attrs:{type:"danger",icon:"el-icon-delete"},on:{click:function(n){return e.onfatechange(t.row,"del")}}},[e._v("删除")]),n("el-button",{attrs:{type:"warning",icon:"el-icon-setting"},on:{click:function(n){return e.onfatechange(t.row,"set")}}},[e._v("分配权限")])],1)}}],null,!1,2955384757)})],1):e._e()],1),n("el-dialog",{attrs:{title:"添加角色",visible:e.open_role_adder}},[n("div",[n("el-input",{attrs:{required:""},model:{value:e.newerinfo.name,callback:function(t){e.$set(e.newerinfo,"name",t)},expression:"newerinfo.name"}},[n("div",{attrs:{slot:"prepend"},slot:"prepend"},[e._v("角色名称")])]),n("el-input",{attrs:{required:""},model:{value:e.newerinfo.desc,callback:function(t){e.$set(e.newerinfo,"desc",t)},expression:"newerinfo.desc"}},[n("div",{attrs:{slot:"prepend"},slot:"prepend"},[e._v("角色描述")])])],1),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.open_role_adder=!1}}},[e._v("取消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.waytonew}},[e._v("确定")])],1)]),n("el-dialog",{attrs:{title:"修改用户信息",visible:e.show_edit_board}},[n("div",[n("el-input",{attrs:{required:""},model:{value:e.editorinfo.name,callback:function(t){e.$set(e.editorinfo,"name",t)},expression:"editorinfo.name"}},[n("div",{attrs:{slot:"prepend"},slot:"prepend"},[e._v("角色名称")])]),n("el-input",{attrs:{required:""},model:{value:e.editorinfo.desc,callback:function(t){e.$set(e.editorinfo,"desc",t)},expression:"editorinfo.desc"}},[n("div",{attrs:{slot:"prepend"},slot:"prepend"},[e._v("角色描述")])])],1),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.show_edit_board=!1}}},[e._v("取消")]),n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.waytoedit(e.r)}}},[e._v("确定")])],1)]),n("el-dialog",{attrs:{title:"删除用户",visible:e.show_del_board}},[n("div",{attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.show_del_board=!1}}},[e._v("取消")]),n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.waytodel(e.r)}}},[e._v("确定")])],1)]),n("el-dialog",{attrs:{title:"分配角色",visible:e.show_role_board}},[e.tagtree?n("div",[n("el-tree",{ref:"tagtree",attrs:{data:e.tagtree,"show-checkbox":"","node-key":"id","default-expanded-keys":e.tags_extended,"default-checked-keys":e.tags_checked},on:{"check-change":e.when_marked_change}})],1):e._e(),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.show_role_board=!1}}},[e._v("取消")]),n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.waytorole(e.r)}}},[e._v("确定")])],1)])],1)},o=[];n("99af"),n("c740"),n("a15b"),n("d81d"),n("a434"),n("b0c0");function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e){if(Array.isArray(e))return i(e)}n("a4d3"),n("e01a"),n("d28b"),n("a630"),n("d3b7"),n("3ca3"),n("ddb0");function c(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}n("fb6a"),n("25f0");function l(e,t){if(e){if("string"===typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(e){return a(e)||c(e)||l(e)||s()}function d(e){return d="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}n("96cf");var f=n("1da1"),p={name:"rolelist",data:function(){return{role_list:null,r:null,open_role_adder:!1,show_edit_board:!1,show_del_board:!1,show_role_board:!1,newerinfo:{name:"",desc:""},editorinfo:{name:"",desc:""},tagtree:null,tags_extended:null,tags_checked:null}},created:function(){},mounted:function(){this.oninit()},methods:{gettagtree:function(e){var t=this;return Object(f["a"])(regeneratorRuntime.mark((function n(){var r,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.$http.get("/rights/tree",{});case 2:r=n.sent,o=r.data,t.tagtree=o.data.map((function(e,t){return e.label=e.authName,e.children=e.children.map((function(e,t){return e.label=e.authName,e.children=e.children.map((function(e,t){return e.label=e.authName,e})),e})),e})),console.log("标签树",t.tagtree),t.tags_extended=t.extend_flex(t.key_exist(t.tagtree)),e();case 8:case"end":return n.stop()}}),n)})))()},oninit:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.r=null,e.newerinfo=e.editorinfo=null,e.newerinfo={name:"",desc:""},e.editorinfo={name:"",desc:""},t.next=6,e.$http.get("/roles",{params:{}});case 6:n=t.sent,r=n.data,e.role_list=r.data,console.group("role_level 角色信息列表 其中单项"),console.log(e.role_list[0]),e.role_list[0].children[0]&&(console.group("manage_level 主标签-管理标签列表 其中单项"),console.log(e.role_list[0].children[0]),e.role_list[0].children[0].children[0]&&(console.group("list_level 次级标签-分类列表标签列表 其中单项"),console.log(e.role_list[0].children[0].children[0]),e.role_list[0].children[0].children[0].children[0]&&(console.group("edit_level 修改标签列表 其中单项"),console.log(e.role_list[0].children[0].children[0].children[0]),console.groupEnd()),console.groupEnd()),console.groupEnd()),console.groupEnd();case 13:case"end":return t.stop()}}),t)})))()},key_exist:function(e){var t=this;return e.children?e.children.map((function(e,n){return t.key_exist(e)})):e.id},extend_flex:function(e){if(!e)return console.log("这尼玛啥也没有"),e;var t=e.findIndex((function(e){return"object"==d(e)}));if(-1!=t){var n=e[t];return e.splice.apply(e,[t,1].concat(u(n))),this.extend_flex(e)}return e},onfatechange:function(e,t){var n=this;switch(this.r=e,console.log("当前操作行信息对象",e),t){case"edit":this.editorinfo.name=e.roleName,this.editorinfo.desc=e.roleDesc,this.show_edit_board=!0;break;case"del":this.show_del_board=!0;break;case"set":var r=this.key_exist(e);this.tags_checked=this.extend_flex(r),console.log("默认选中标签数组",this.tags_checked),this.gettagtree((function(){n.show_role_board=!0}));break}},when_marked_change:function(e,t,n){if(!e.children)if(console.log("权限树选中状态改变",e,t,n),console.log("临刑前查看",this.tags_checked),t)this.tags_checked.push(e.id);else{var r=this.tags_checked.findIndex((function(t){return t==e.id}));this.tags_checked.splice(r,1)}},waytonew:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.post("/roles",{roleName:e.newerinfo.name,roleDesc:e.newerinfo.desc});case 2:n=t.sent,r=n.data,console.log(r),e.open_role_adder=!1,e.r=null,e.oninit();case 8:case"end":return t.stop()}}),t)})))()},waytoedit:function(e){var t=this;return Object(f["a"])(regeneratorRuntime.mark((function n(){var r,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.$http.put("/roles/".concat(e.id),{roleName:t.editorinfo.name,roleDesc:t.editorinfo.desc});case 2:r=n.sent,o=r.data,console.log(o),t.show_edit_board=!1,t.r=null,t.oninit();case 8:case"end":return n.stop()}}),n)})))()},waytodel:function(e){var t=this;return Object(f["a"])(regeneratorRuntime.mark((function n(){var r,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.$http.delete("/roles/".concat(e.id),{});case 2:r=n.sent,o=r.data,console.log(o),t.show_del_board=!1,t.r=null,t.oninit();case 8:case"end":return n.stop()}}),n)})))()},waytorole:function(e){var t=this;return Object(f["a"])(regeneratorRuntime.mark((function n(){var r,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return console.log("临行检查",t.tags_checked),n.next=3,t.$http.post("/roles/".concat(e.id,"/rights"),{rids:t.tags_checked.join(",")});case 3:r=n.sent,o=r.data,console.log(o),t.show_role_board=!1,t.r=null,t.tags_checked=null,t.oninit();case 10:case"end":return n.stop()}}),n)})))()}},computed:{},watch:{},filters:{},directives:{},components:{}},h=p,b=(n("1807"),n("2877")),g=Object(b["a"])(h,r,o,!1,null,"98cd23d2",null);t["default"]=g.exports},"99af":function(e,t,n){"use strict";var r=n("23e7"),o=n("d039"),i=n("e8b5"),a=n("861d"),c=n("7b0b"),l=n("50c4"),s=n("8418"),u=n("65f0"),d=n("1dde"),f=n("b622"),p=n("2d00"),h=f("isConcatSpreadable"),b=9007199254740991,g="Maximum allowed index exceeded",v=p>=51||!o((function(){var e=[];return e[h]=!1,e.concat()[0]!==e})),m=d("concat"),y=function(e){if(!a(e))return!1;var t=e[h];return void 0!==t?!!t:i(e)},_=!v||!m;r({target:"Array",proto:!0,forced:_},{concat:function(e){var t,n,r,o,i,a=c(this),d=u(a,0),f=0;for(t=-1,r=arguments.length;t<r;t++)if(i=-1===t?a:arguments[t],y(i)){if(o=l(i.length),f+o>b)throw TypeError(g);for(n=0;n<o;n++,f++)n in i&&s(d,f,i[n])}else{if(f>=b)throw TypeError(g);s(d,f++,i)}return d.length=f,d}})},a15b:function(e,t,n){"use strict";var r=n("23e7"),o=n("44ad"),i=n("fc6a"),a=n("a640"),c=[].join,l=o!=Object,s=a("join",",");r({target:"Array",proto:!0,forced:l||!s},{join:function(e){return c.call(i(this),void 0===e?",":e)}})},a4d3:function(e,t,n){"use strict";var r=n("23e7"),o=n("da84"),i=n("d066"),a=n("c430"),c=n("83ab"),l=n("4930"),s=n("fdbf"),u=n("d039"),d=n("5135"),f=n("e8b5"),p=n("861d"),h=n("825a"),b=n("7b0b"),g=n("fc6a"),v=n("c04e"),m=n("5c6c"),y=n("7c73"),_=n("df75"),w=n("241c"),k=n("057f"),x=n("7418"),S=n("06cf"),O=n("9bf2"),j=n("d1e7"),A=n("9112"),N=n("6eeb"),$=n("5692"),E=n("f772"),R=n("d012"),I=n("90e3"),P=n("b622"),C=n("e538"),T=n("746f"),D=n("d44e"),q=n("69f3"),J=n("b727").forEach,F=E("hidden"),M="Symbol",Q="prototype",U=P("toPrimitive"),W=q.set,z=q.getterFor(M),B=Object[Q],G=o.Symbol,H=i("JSON","stringify"),K=S.f,L=O.f,V=k.f,X=j.f,Y=$("symbols"),Z=$("op-symbols"),ee=$("string-to-symbol-registry"),te=$("symbol-to-string-registry"),ne=$("wks"),re=o.QObject,oe=!re||!re[Q]||!re[Q].findChild,ie=c&&u((function(){return 7!=y(L({},"a",{get:function(){return L(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=K(B,t);r&&delete B[t],L(e,t,n),r&&e!==B&&L(B,t,r)}:L,ae=function(e,t){var n=Y[e]=y(G[Q]);return W(n,{type:M,tag:e,description:t}),c||(n.description=t),n},ce=s?function(e){return"symbol"==typeof e}:function(e){return Object(e)instanceof G},le=function(e,t,n){e===B&&le(Z,t,n),h(e);var r=v(t,!0);return h(n),d(Y,r)?(n.enumerable?(d(e,F)&&e[F][r]&&(e[F][r]=!1),n=y(n,{enumerable:m(0,!1)})):(d(e,F)||L(e,F,m(1,{})),e[F][r]=!0),ie(e,r,n)):L(e,r,n)},se=function(e,t){h(e);var n=g(t),r=_(n).concat(he(n));return J(r,(function(t){c&&!de.call(n,t)||le(e,t,n[t])})),e},ue=function(e,t){return void 0===t?y(e):se(y(e),t)},de=function(e){var t=v(e,!0),n=X.call(this,t);return!(this===B&&d(Y,t)&&!d(Z,t))&&(!(n||!d(this,t)||!d(Y,t)||d(this,F)&&this[F][t])||n)},fe=function(e,t){var n=g(e),r=v(t,!0);if(n!==B||!d(Y,r)||d(Z,r)){var o=K(n,r);return!o||!d(Y,r)||d(n,F)&&n[F][r]||(o.enumerable=!0),o}},pe=function(e){var t=V(g(e)),n=[];return J(t,(function(e){d(Y,e)||d(R,e)||n.push(e)})),n},he=function(e){var t=e===B,n=V(t?Z:g(e)),r=[];return J(n,(function(e){!d(Y,e)||t&&!d(B,e)||r.push(Y[e])})),r};if(l||(G=function(){if(this instanceof G)throw TypeError("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,t=I(e),n=function(e){this===B&&n.call(Z,e),d(this,F)&&d(this[F],t)&&(this[F][t]=!1),ie(this,t,m(1,e))};return c&&oe&&ie(B,t,{configurable:!0,set:n}),ae(t,e)},N(G[Q],"toString",(function(){return z(this).tag})),N(G,"withoutSetter",(function(e){return ae(I(e),e)})),j.f=de,O.f=le,S.f=fe,w.f=k.f=pe,x.f=he,C.f=function(e){return ae(P(e),e)},c&&(L(G[Q],"description",{configurable:!0,get:function(){return z(this).description}}),a||N(B,"propertyIsEnumerable",de,{unsafe:!0}))),r({global:!0,wrap:!0,forced:!l,sham:!l},{Symbol:G}),J(_(ne),(function(e){T(e)})),r({target:M,stat:!0,forced:!l},{for:function(e){var t=String(e);if(d(ee,t))return ee[t];var n=G(t);return ee[t]=n,te[n]=t,n},keyFor:function(e){if(!ce(e))throw TypeError(e+" is not a symbol");if(d(te,e))return te[e]},useSetter:function(){oe=!0},useSimple:function(){oe=!1}}),r({target:"Object",stat:!0,forced:!l,sham:!c},{create:ue,defineProperty:le,defineProperties:se,getOwnPropertyDescriptor:fe}),r({target:"Object",stat:!0,forced:!l},{getOwnPropertyNames:pe,getOwnPropertySymbols:he}),r({target:"Object",stat:!0,forced:u((function(){x.f(1)}))},{getOwnPropertySymbols:function(e){return x.f(b(e))}}),H){var be=!l||u((function(){var e=G();return"[null]"!=H([e])||"{}"!=H({a:e})||"{}"!=H(Object(e))}));r({target:"JSON",stat:!0,forced:be},{stringify:function(e,t,n){var r,o=[e],i=1;while(arguments.length>i)o.push(arguments[i++]);if(r=t,(p(t)||void 0!==e)&&!ce(e))return f(t)||(t=function(e,t){if("function"==typeof r&&(t=r.call(this,e,t)),!ce(t))return t}),o[1]=t,H.apply(null,o)}})}G[Q][U]||A(G[Q],U,G[Q].valueOf),D(G,M),R[F]=!0},a630:function(e,t,n){var r=n("23e7"),o=n("4df4"),i=n("1c7e"),a=!i((function(e){Array.from(e)}));r({target:"Array",stat:!0,forced:a},{from:o})},bb8a:function(e,t,n){},c740:function(e,t,n){"use strict";var r=n("23e7"),o=n("b727").findIndex,i=n("44d2"),a=n("ae40"),c="findIndex",l=!0,s=a(c);c in[]&&Array(1)[c]((function(){l=!1})),r({target:"Array",proto:!0,forced:l||!s},{findIndex:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),i(c)},d28b:function(e,t,n){var r=n("746f");r("iterator")},d81d:function(e,t,n){"use strict";var r=n("23e7"),o=n("b727").map,i=n("1dde"),a=n("ae40"),c=i("map"),l=a("map");r({target:"Array",proto:!0,forced:!c||!l},{map:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},ddb0:function(e,t,n){var r=n("da84"),o=n("fdbc"),i=n("e260"),a=n("9112"),c=n("b622"),l=c("iterator"),s=c("toStringTag"),u=i.values;for(var d in o){var f=r[d],p=f&&f.prototype;if(p){if(p[l]!==u)try{a(p,l,u)}catch(b){p[l]=u}if(p[s]||a(p,s,d),o[d])for(var h in i)if(p[h]!==i[h])try{a(p,h,i[h])}catch(b){p[h]=i[h]}}}},e01a:function(e,t,n){"use strict";var r=n("23e7"),o=n("83ab"),i=n("da84"),a=n("5135"),c=n("861d"),l=n("9bf2").f,s=n("e893"),u=i.Symbol;if(o&&"function"==typeof u&&(!("description"in u.prototype)||void 0!==u().description)){var d={},f=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof f?new u(e):void 0===e?u():u(e);return""===e&&(d[t]=!0),t};s(f,u);var p=f.prototype=u.prototype;p.constructor=f;var h=p.toString,b="Symbol(test)"==String(u("test")),g=/^Symbol\((.*)\)[^)]+$/;l(p,"description",{configurable:!0,get:function(){var e=c(this)?this.valueOf():this,t=h.call(e);if(a(d,e))return"";var n=b?t.slice(7,-1):t.replace(g,"$1");return""===n?void 0:n}}),r({global:!0,forced:!0},{Symbol:f})}},e538:function(e,t,n){var r=n("b622");t.f=r}}]);
//# sourceMappingURL=chunk-15eb7d04.6a383ac0.js.map